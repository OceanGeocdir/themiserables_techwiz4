<!DOCTYPE html>
<html lang="en" ng-app="myApp">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.6.9/angular-route.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.6.9/angular.min.js"></script>

    <script src="/angular.min.js"></script>

    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Archivo:wght@400;700&display=swap" rel="stylesheet" />
    <!--! font awesome-->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <link rel="shortcut icon" href="./images/favicon.ico" type="image/x-icon" />

    <!-- Carousel -->
    <link rel="stylesheet" href="node_modules/@glidejs/glide/dist/css/glide.core.min.css" />
    <link rel="stylesheet" href="node_modules/@glidejs/glide/dist/css/glide.theme.min.css" />

    <!-- Animate On Scroll -->
    <link rel="stylesheet" href="https://unpkg.com/aos@next/dist/aos.css" />


    <!-- Custom StyleSheet -->
    <link rel="stylesheet" href="css/newcart.css" />
</head>
<body>
    <main id="main">
        <!-- Main section -->
    
        <section class="section cart__area">
            <!-- Cart area section -->
    
            <div class="container" ng-controller="CartController">
                <!-- Main container -->
    
                <div class="responsive__cart-area">
                    <!-- Responsive cart area -->
    
                    <form class="cart__form">
                        <!-- Cart form -->
    
                        <div class="cart__table table-responsive">
                            <!-- Cart table -->
                            <table width="100%" class="table">
                                <!-- Table for cart items -->
                                <thead>
                                    <tr>
                                        <th>PRODUCT</th>
                                        <th>NAME</th>
                                        <th>UNIT PRICE</th>
                                        <th>QUANTITY</th>
                                        <th>TOTAL</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr ng-repeat="item in cartItems">
                                        <td class="product__thumbnail">
                                            <img id="product-image" ng-src="{{ item.img }}" alt="{{ item.product }}">
                                        </td>
                                        <td class="product__name">
                                            <a href="#" id="product-title">{{ item.product }}</a>
                                            <br><br>
                                            <small id="product-color-size">{{ item.code }}</small>
                                        </td>
                                        <td class="product__price">
                                            <div class="price">
                                                <span class="new__price" id="product-price">{{ item.price }}</span>
                                            </div>
                                        </td>
                                        <td class="product__quantity">
                                            <div class="input-counter">
                                                <div>
                                                    <!-- ... (quantity input field) ... -->
                                                </div>
                                            </div>
                                        </td>
                                        <td class="product__subtotal">
                                            <div class="price">
                                                <span class="new__price" id="product-subtotal">{{ item.quantity * item.price }}</span>
                                            </div>
                                            <a href="#" class="remove__cart-item" id="remove-cart-item-link" ng-click="removeFromCart(item)">
                                                <!-- ... (remove icon) ... -->
                                            </a>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
    
                        <div class="cart-btns">
                            <!-- Cart buttons -->
                            <div class="continue__shopping">
                                <!-- Continue shopping button -->
                                <a href="product.html">Continue Shopping</a>
                            </div>
                            <div class="check__shipping">
                                <!-- Shipping checkbox -->
                                <input type="checkbox" id="shipping-checkbox">
                                <span>Shipping(+7$)</span>
                            </div>
                        </div>
    
                        <div class="cart__totals">
                            <!-- Cart totals -->
                            <h3>Cart Totals</h3>
                            <ul>
                                <li>
                                    Subtotal
                                    <span class="new__price">$<span id="sub-total">{{ calculateSubtotal() | currency }}</span></span>
                                </li>
                                <li>
                                    Shipping
                                    <span id="shipping-cost">{{ shipping | currency }}</span>

                                </li>
                                <li>
                                    Total
                                    <span class="new__price" id="total">{{ calculateTotal() | currency }}</span>
                                </li>
                            </ul>
                            <a href="" onclick="openPopup()">PROCEED TO CHECKOUT</a>
                        </div>
                    </form>
                </div>
            </div>
        </section>
    
        <!-- Facility Section -->
        <section class="facility__section section" id="facility">
            <!-- Facility section -->
    
            <div class="container">
                <!-- Main container for facility section -->
    
                <div class="facility__contianer">
                    <!-- Container for facility items -->
    
                    <div class="facility__box">
                        <!-- Facility box 1 -->
                        <div class="facility-img__container">
                            <svg>
                                <!-- Airplane icon -->
                                <use xlink:href="./images/sprite.svg#icon-airplane"></use>
                            </svg>
                        </div>
                        <p>FREE SHIPPING WORLD WIDE</p>
                    </div>
    
                    <div class="facility__box">
                        <!-- Facility box 2 -->
                        <div class="facility-img__container">
                            <svg>
                                <!-- Credit card icon -->
                                <use xlink:href="./images/sprite.svg#icon-credit-card-alt"></use>
                            </svg>
                        </div>
                        <p>100% MONEY BACK GUARANTEE</p>
                    </div>
    
                    <div class="facility__box">
                        <!-- Facility box 3 -->
                        <div class="facility-img__container">
                            <svg>
                                <!-- Credit card icon -->
                                <use xlink:href="./images/sprite.svg#icon-credit-card"></use>
                            </svg>
                        </div>
                        <p>MANY PAYMENT GATWAYS</p>
                    </div>
    
                    <div class="facility__box">
                        <!-- Facility box 4 -->
                        <div class="facility-img__container">
                            <svg>
                                <!-- Headphones icon -->
                                <use xlink:href="./images/sprite.svg#icon-headphones"></use>
                            </svg>
                        </div>
                        <p>24/7 ONLINE SUPPORT</p>
                    </div>
                </div>
            </div>
        </section>
    </main>
</body>
</html>


<script>
    angular.module('myApp', [])
    .controller('CartController', function ($scope) {
    $scope.cartItems = JSON.parse(localStorage.getItem('product_list')) || [];
    $scope.shipping = 5; // Set the shipping cost here

    $scope.calculateSubtotal = function() {
        return $scope.cartItems.reduce(function(total, item) {
            return total + (item.price * item.quantity);
        }, 0);
    };

    $scope.calculateTotal = function() {
        var subtotal = $scope.calculateSubtotal();
        return subtotal + $scope.shipping;
    };
});

</script>